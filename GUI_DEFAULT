if _G.VAR_GUI_DEFAULT then
    warn("⛔ GUI Default đã được chạy trước đó!")
    return
end
_G.VAR_GUI_DEFAULT = true

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

local function FormatTime(seconds)
    local hours = math.floor(seconds / 3600)
    local minutes = math.floor((seconds % 3600) / 60)
    local remainingSeconds = math.floor(seconds % 60)
    return string.format("%02d:%02d:%02d", hours, minutes, remainingSeconds)
end

local function updateLabelSize(label)
    label.Size = UDim2.new(0, label.TextBounds.X + 20, 0, 38)
end

local function getMiscAmount(itemName)
    local backpack = player:FindFirstChild("Backpack")
    if not backpack then return 0 end
    local cnt = 0
    for _, it in ipairs(backpack:GetChildren()) do
        local ok, nm = pcall(function() return it.Name end)
        if ok and nm and tostring(nm):lower():find(itemName:lower()) then
            cnt += 1
        end
    end
    return cnt
end

local function startGuiDefault()
    local oldGui = playerGui:FindFirstChild("GuiDefault")
    if oldGui then oldGui:Destroy() end

    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "GuiDefault"
    screenGui.ResetOnSpawn = false
    screenGui.Parent = playerGui

    local function createRegion(position, anchor, alignment)
        local frame = Instance.new("Frame")
        frame.BackgroundTransparency = 1
        frame.Size = UDim2.new(0, 250, 1, 0)
        frame.Position = position
        frame.AnchorPoint = anchor
        frame.Parent = screenGui

        local layout = Instance.new("UIListLayout")
        layout.SortOrder = Enum.SortOrder.LayoutOrder
        layout.Padding = UDim.new(0, 3)
        layout.HorizontalAlignment = alignment
        layout.VerticalAlignment = Enum.VerticalAlignment.Top
        layout.Parent = frame

        return frame
    end

    local rightRegion  = createRegion(UDim2.new(1, 0, 0, -55), Vector2.new(1, 0), Enum.HorizontalAlignment.Right)
    local centerRegion = createRegion(UDim2.new(0.5, 70, 0, -55), Vector2.new(0.5, 0), Enum.HorizontalAlignment.Center)
    local leftRegion   = createRegion(UDim2.new(0, 0, 0, -55), Vector2.new(0, 0), Enum.HorizontalAlignment.Left)

    local function createLabel(name, parent, bgColor)
        local label = Instance.new("TextLabel")
        label.Name = name
        label.Size = UDim2.new(1, 0, 0, 38)
        label.BackgroundColor3 = bgColor
        label.TextColor3 = Color3.new(1, 1, 1)
        label.Font = Enum.Font.GothamBold
        label.TextSize = 32
        label.BackgroundTransparency = 0
        label.BorderSizePixel = 0
        label.TextXAlignment = Enum.TextXAlignment.Center
        label.Text = "..."
        label.AutoLocalize = false
        label.Visible = false
        label.Parent = parent
        return label
    end

    local fpsLabel  = createLabel("FPSLabel",  rightRegion,  Color3.fromRGB(0, 102, 204))
    local timeLabel = createLabel("TimeLabel", centerRegion, Color3.fromRGB(0, 102, 204))

    local itemsToShow = {
        { name = "Dragonfly",      color = Color3.fromRGB(255, 215, 0) },
        { name = "Red Fox",        color = Color3.fromRGB(255, 255, 255) },
        { name = "Mimic Octopus",  color = Color3.fromRGB(102, 0, 204) },
        { name = "Cockatrice",     color = Color3.fromRGB(255, 153, 51) },
        { name = "Phoenix",        color = Color3.fromRGB(204, 51, 51) },
    }
    local itemLabels = {}

    for _, item in ipairs(itemsToShow) do
        itemLabels[item.name] = createLabel(item.name .. "Label", leftRegion, item.color)
    end

    local lastUpdate = tick()
    local frameCount = 0
    RunService.RenderStepped:Connect(function()
        frameCount += 1
        local now = tick()
        if now - lastUpdate >= 1 then
            local fps = frameCount / (now - lastUpdate)
            fpsLabel.Text = string.format(" %d", fps + 0.5)
            updateLabelSize(fpsLabel)
            frameCount = 0
            lastUpdate = now
        end
    end)

    local startTime = os.time()

    task.spawn(function()
        while true do
            pcall(function()
                for _, item in ipairs(itemsToShow) do
                    local count = getMiscAmount(item.name)
                    local lbl = itemLabels[item.name]
                    if count > 0 then
                        lbl.Text = string.format("%s | %s", item.name:upper(), tostring(count))
                        updateLabelSize(lbl)
                        lbl.Visible = true
                    else
                        lbl.Visible = false
                    end
                end
                timeLabel.Text = "TIME | " .. FormatTime(os.time() - startTime)
                updateLabelSize(timeLabel)
            end)
            task.wait(0.5)
        end
    end)
end

startGuiDefault()
